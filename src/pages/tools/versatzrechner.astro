---
import Layout from "../../layouts/Layout.astro";
import Body from "../../components/Body.astro";
import HomeButton from "../../components/HomeButton.astro";
import Input from "../../components/Input.astro";

import Select from "../../components/Select.jsx";

import cutters from "../../../public/cutters.json";

const tools = [{ id: 1, name: "... Custom Tool" }];
let count = 2;
for (const [key, value] of Object.entries(cutters)) {
  tools.push({ id: count, name: key });
  count++;
}

const tool_types = [
  { id: 1, name: "Fasenfräser" },
  { id: 2, name: "Kombientgrater" },
  { id: 3, name: "Schwalbenschwanz" },
];
---

<Layout title="Versatzrechner">
  <Body>
    <HomeButton />
    <div
      class="py-24 px-16 w-full max-w-6xl h-full grid lg:grid-cols-2 md:grid-cols-1 gap-8"
    >
      <section class="flex flex-col gap-4">
        <Select options={tools} label="Werkzeug" name="tool" client:load />
        <Select
          options={tool_types}
          label="Werkzeugart"
          name="tool_type"
          client:load
        />
        <div class="flex w-full gap-4 justify-stretch">
          <Input label="Schneiden-⌀" identifier="d1" client:load />
          <Input label="Spitzen-⌀" identifier="d2" client:load disabled />
          <Input label="Schaft-⌀" identifier="d3" client:load disabled />
        </div>
        <div class="flex w-full gap-4 justify-stretch">
          <Input label="Schneidenlänge" identifier="l1" client:load />
          <Input label="Mittellänge" identifier="l2" client:load />
          <Input label="Stumpflänge" identifier="l3" client:load />
        </div>
        <div class="flex w-full gap-4 justify-stretch">
          <Input label="Spitzenwinkel" identifier="a1" client:load />
          <Input label="Schulterwinkel" identifier="a2" client:load />
        </div>
      </section>
      <div>
        <img src="/debug_placeholder_img.png" alt="" />
      </div>
      <div>
        <Select options={tools} label="Label" name="yo-name" client:load />
      </div>
      <div>
        <img src="/debug_placeholder_img.png" alt="" />
      </div>
    </div>
  </Body>
</Layout>

<script>
  function enableInput(input) {
    input.disabled = false;
    input.className =
      "w-full border-2 py-2 pl-3 pr-10 text-left shadow-md focus:outline-none bg-white border-black text-black";
  }
  function disableInput(input) {
    input.disabled = true;
    input.className =
      "w-full border-2 py-2 pl-3 pr-10 text-left shadow-md focus:outline-none bg-gray-200 border-gray-600 text-gray-700";
  }

  // Number Inputs for tool
  let d1 = document.getElementById("d1") as HTMLInputElement;
  let d2 = document.getElementById("d2") as HTMLInputElement;
  let d3 = document.getElementById("d3") as HTMLInputElement;

  let l1 = document.getElementById("l1") as HTMLInputElement;
  let l2 = document.getElementById("l2") as HTMLInputElement;
  let l3 = document.getElementById("l3") as HTMLInputElement;

  let a1 = document.getElementById("a1") as HTMLInputElement;
  let a2 = document.getElementById("a2") as HTMLInputElement;

  disableInput(a2)
  enableInput(d3)
</script>
